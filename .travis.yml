sudo: required
dist: trusty

addons:
    chrome: stable
    apt:
        sources:
            - mysql-5.7-trusty
        packages:
            - mysql-server
            - mysql-client


language: php

php:
    - 7.3

services:
    - memcached

notifications:
  email:
    - barryo@inex.ie

before_install:
  - sudo mysql -e "use mysql; update user set authentication_string=PASSWORD('new_password') where User='root'; update user set plugin='mysql_native_password';FLUSH PRIVILEGES;"
  - sudo mysql_upgrade -u root -pnew_password
  - sudo service mysql restart
  - sudo apt-get update
  - "./data/travis-ci/setup_tests.sh"

after_failure:
    - "./data/travis-ci/after_failure.sh"

