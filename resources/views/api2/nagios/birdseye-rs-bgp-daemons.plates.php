#
# Nagios configuration to check member peer sessions to Bird daemons via the Bird's Eye API
#
# Generated by IXP Manager on <?= date('Y-m-d H:i:s') ?>
#
#

define command{
        command_name    check_birdseye_bgp_session
        command_line    /usr/local/nagios-plugins-other/nagios-check-birdseye-bgp-sessions.php -a $ARG1$ -p $ARG2$ -n
}

<?php foreach( $map as $m ): ?>

define service     {
        use                     generic-service
        host_name               <?= $m['hname'] . "\n" ?>
        service_description     <?= $m['name'] . "\n" ?>
        check_command           check_birdseye_bgp_session!<?= $m['api'] ?>!<?= $m['pname'] . "\n" ?>
}

<?php endforeach; ?>
